(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{EY9b:function(e,n,t){"use strict";t.r(n);t("nPhU");var o=t("mXGw"),r=t.n(o),a=(t("IYjZ"),t("uzcW"),t("wDqy"),t("yvkl"),t("abGl"),t("gZHo"),t("Fdmb"),t("Ir+3"),t("dV/x")),i=t("aNYv"),c=t("6CzD"),l=t("J1LG"),u=t("Fcif"),s=t("mK0O"),m=t("F1/0"),p=t("czxX"),d=t("OcAx");function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){Object(s.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var y=r.a.createContext(null),h=function(e,n){var t={length:Number.MAX_VALUE,match:null},o=!0,r=!1,a=void 0;try{for(var i,c=n[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var l=i.value,u=Object(m.matchPath)(e,l);if(u){var s=0;u.params&&(s+=Object.keys(u.params).length),u.isExact||(s+=1e3),s<t.length&&(t={length:s,match:u})}}}catch(p){r=!0,a=p}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}return t.match&&t.length<Number.MAX_VALUE?t:null},v=function(e){return!("object"!==Object(l.a)(e)||Object(d.c)(e)||Object(d.c)(e.key)||Object(d.c)(e.length)||Object(d.c)(e.match)||"object"!==Object(l.a)(e.match))},j=function(e,n){return v(n)&&(!v(e)||n.length<e.length)?n:e},O=function(e,n){return Object(o.useMemo)((function(){return function e(n,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{key:"dummy",match:null,length:Number.MAX_VALUE},r=o;if(Object(d.c)(n))return null;var a=!0,i=!1,l=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var m=u.value,p=void 0;if(m.items)p=e(m.items,t,r);else{var b=m.key,y=m.activePathPatterns,v=void 0===y?[]:y;p=f({key:b,length:Number.MAX_VALUE,match:null},h(t,[b].concat(Object(c.a)(v))))}if((r=j(r,p))&&r.length<=0)return r}}catch(O){i=!0,l=O}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return r.length<Number.MAX_VALUE&&!Object(d.c)(r.match)?r:null}(n,e)}),[e,n])},g=function(e){var n=e.items,t=e.mapLocationToActiveKey,a=e.onItemClick,c=e.location,l=c.pathname,s=function(e,n){return Object(o.useMemo)((function(){if("function"==typeof n)return n(e)}),[n,e])}(c,t),p=O(l,n)||{key:null,match:null},b=p.key,h=p.match,v=function(e){var n=Object(o.useState)(""),t=Object(i.a)(n,2),r=t[0],a=t[1];return[r,Object(o.useCallback)((function(){"function"==typeof e&&e.apply(void 0,arguments),a(arguments.length<=0?void 0:arguments[0])}),[e])]}(a),j=Object(i.a)(v,2),g=j[0],k=j[1];return[Object(o.useMemo)((function(){return function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.map((function(n){var t=n.to,o=n.href,a=n.linkProps,i=void 0===a?{}:a,c=n.disabled,l=n.render,s=n.items;if(s)return f({},n,{items:e(s)});if(Object(d.c)(l)&&!c){if(t)return f({},n,{render:function(e){return r.a.createElement(y.Consumer,null,(function(n){if(!n)throw new Error("item is not rendered under RoutableMenu");return r.a.createElement(m.Link,Object(u.a)({},i,{to:"function"==typeof e.to?e.to(n,e):e.to}),e.label)}))}});if(o)return f({},n,{render:function(e){return r.a.createElement(y.Consumer,null,(function(n){if(!n)throw new Error("item is not rendered under RoutableMenu");return r.a.createElement("a",Object(u.a)({},e.linkProps,{href:"function"==typeof e.href?e.href(n,e):e.href}),e.label)}))}})}return n}))}(n)}),[n]),[s,b,g].filter((function(e){return!Object(d.c)(e)}))[0],k,{match:h,location:c}]};var k=Object(m.withRouter)((function(e){var n=e.location,t=e.mapLocationToActiveKey,l=e.items,s=e.onItemClick,m=e.activeKey,d=(e.staticContext,e.openKeys),b=e.onOpen,f=e.defaultOpenKeys,h=Object(a.a)(e,["location","mapLocationToActiveKey","items","onItemClick","activeKey","staticContext","openKeys","onOpen","defaultOpenKeys"]),v=g({items:l,onItemClick:s,location:n,mapLocationToActiveKey:t}),j=Object(i.a)(v,4),O=j[0],k=j[1],w=j[2],x=j[3],M=Object(o.useState)([]),E=Object(i.a)(M,2),C=E[0],P=E[1],A=m||k,R=f||d?d:C;Object(o.useLayoutEffect)((function(){var e=function(){if(A){var e=function e(n,t,o){var r=!0,a=!1,i=void 0;try{for(var l,u=t[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var s=l.value;if(s.key===n)return[].concat(Object(c.a)(o),[s]);if(Array.isArray(s.items)){var m=e(n,s.items,[].concat(Object(c.a)(o),[s]));if(m)return m}}}catch(p){a=!0,i=p}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return null}(A,O,[]);if(Array.isArray(e))return e.map((function(e){return e.key}))}}();P(e)}),[A,O]);var I=Object(o.useCallback)((function(e,n){"function"==typeof b&&b(e,n),P(e)}),[b]),K=R?{openKeys:R}:void 0;return r.a.createElement(y.Provider,{value:x},r.a.createElement(p.a,Object(u.a)({},h,{items:O,activeKey:A},K,{defaultOpenKeys:f,onOpen:I,onItemClick:w})))})),w=t("1j5s");t.d(n,"_demoSrcFiles",(function(){return E}));var x=["cn-beijing","cn-shanghai","cn-hangzhou"],M=[{key:"/home",to:"/",label:"首页"},{key:"/instance",to:"/instance",label:"实例概览"},{key:"/instance/:region",to:function(){return"/instance/"+x[0]},activePathPatterns:["/instance/:region","/instance-list/:region"],label:"实例列表"},{key:"/logs",label:"日志",items:[{key:"/daily/:region?",to:function(e,n){var t=(e.match||{}).params,o=(t=void 0===t?{}:t).region,r=void 0===o?"":o;return r?"/daily/"+r:"/daily"},label:"日常环境"},{key:"/pre",to:"/pre",visible:!1,label:"预发环境"},{key:"/prod",to:"/prod",label:"生产环境"}]},{key:"/others",label:"其他",items:[{key:"/help",label:"帮助",render:function(e){e.key;var n=e.label;return r.a.createElement("a",{href:"https://www.aliyun.com",target:"_blank"},n)}},{key:"/docs",to:"/docs",label:"文档",disabled:!0}]}],E=(n.default=function(){return r.a.createElement(w.FakeBrowserWithWrapper,null,r.a.createElement("div",null,r.a.createElement(k,{header:"阿里云控制台",items:M}),r.a.createElement("p",null,"Tips: 在地址栏输入",r.a.createElement("code",null,"/daily/cn-beijing"),"，父节点会自动展开")))},{"sandbox.config.json":'{\n  "infiniteLoopProtection": true,\n  "hardReloadOnChange": false,\n  "template": "parcel"\n}',"tsconfig.json":'{\n  "compilerOptions": {\n    "jsx": "react",\n    "moduleResolution": "node",\n    "esModuleInterop": true\n  }\n}\n',"package.json":'{\n  "name": "console-components-demo",\n  "version": "1.0.0",\n  "description": "",\n  "keywords": [],\n  "main": "index.html",\n  "scripts": {\n    "start": "parcel index.html --open",\n    "build": "parcel build index.html"\n  },\n  "dependencies": {\n    "@alicloud/console-components-fake-browser": "latest",\n    "@alicloud/console-components": "latest",\n    "dva": "^2.4.1",\n    "styled-components": "^4.2.0",\n    "moment": "^2.21.0",\n    "react": "16.8.4",\n    "react-dom": "16.8.4",\n    "react-scripts": "2.1.3"\n  },\n  "devDependencies": {\n    "@types/react": "16.8.8",\n    "@types/react-dom": "16.8.2",\n    "@types/styled-components": "^4.1.8",\n    "typescript": "^3.7.2"\n  },\n  "browserslist": [\n    ">0.2%",\n    "not dead",\n    "not ie <= 11",\n    "not op_mini all"\n  ]\n}\n',"src/index.tsx":"import * as React from 'react'\nimport { render } from 'react-dom'\nimport '@alicloud/console-components/dist/wind.css'\nimport App from './demo/routable-menu'\n\nconst rootElement = document.getElementById('app')\nrender(<App />, rootElement)\n","index.html":'<html>\n  <head>\n    <title>Console Components Demo</title>\n    <meta charset="UTF-8" />\n  </head>\n\n  <body>\n    <div id="app"></div>\n\n    <script src="src/index.tsx"><\/script>\n  </body>\n</html>\n',"src/demo/routable-menu.tsx":"import React from 'react'\nimport { Route } from 'dva/router'\nimport { Input } from '@alicloud/console-components'\nimport RoutableMenu from '@alicloud/console-components-console-menu/RoutableMenu'\nimport { IRoutableItemDescriptor } from '@alicloud/console-components-console-menu'\nimport { FakeBrowserWithWrapper as FakeBrowser } from '@alicloud/console-components-fake-browser'\n\nconst regions = ['cn-beijing', 'cn-shanghai', 'cn-hangzhou']\n\nconst items: IRoutableItemDescriptor[] = [\n  { key: '/home', to: '/', label: '首页' },\n  { key: '/instance', to: '/instance', label: '实例概览' },\n  {\n    key: '/instance/:region',\n    // 可以使用函数来返回动态的 pathname 或 location\n    to: () => `/instance/${regions[0]}`,\n    activePathPatterns: ['/instance/:region', '/instance-list/:region'],\n    label: '实例列表',\n  },\n\n  // Defination as a sub menu\n  {\n    key: '/logs',\n    label: '日志',\n    items: [\n      {\n        key: '/daily/:region?',\n        // to 也可以声明为一个函数表达式\n        // 第一个参数是当前的 route props ，第二个参数是当前的 item 的结构化信息\n        // 你可以利用这些信息来动态地返回需要进行跳转的 pathname 或 location\n        to: (routeProps, thisItem) => {\n          // 下面的这个例子使用了当前路由的匹配信息（注意：并不是对于该 item 的匹配）\n          // 来进行相应的跳转。如果当前的路由中包含 param: region ，（譬如\n          // `/instance/:region` ，那么点击该 item 将会跳转到 `/daily/:region`\n          const match = routeProps.match || {}\n          const { params: { region = '' } = {} } = match\n          return region ? `/daily/${region}` : '/daily'\n        },\n        label: '日常环境',\n      },\n      { key: '/pre', to: '/pre', visible: false, label: '预发环境' },\n      { key: '/prod', to: '/prod', label: '生产环境' },\n    ],\n  },\n\n  // Another sub menu\n  {\n    key: '/others',\n    label: '其他',\n    items: [\n      {\n        key: '/help',\n        label: '帮助',\n        render: ({ key, label }) => (\n          <a href=\"https://www.aliyun.com\" target=\"_blank\">\n            {label}\n          </a>\n        ),\n      },\n      {\n        key: '/docs',\n        to: '/docs',\n        label: '文档',\n        disabled: true,\n      },\n    ],\n  },\n]\n\nconst Example = () => {\n  return (\n    <FakeBrowser>\n      <div>\n        <RoutableMenu header=\"阿里云控制台\" items={items} />\n        <p>\n          Tips: 在地址栏输入<code>/daily/cn-beijing</code>，父节点会自动展开\n        </p>\n      </div>\n    </FakeBrowser>\n  )\n}\n\nexport default Example\n","src/RoutableMenu.js":"/**\n * 我们没有从index.js export CompatibleMenu 和 RoutableMenu。\n * 因为这两个组件依赖于peerDependency: dva。\n * 如果我们在index.js中引入这两个组件，那么**即使用户没有import这两个组件**，\n * webpack在构建依赖树的时候也必须解析到用户安装的dva及其递归依赖，\n * 否则会报错。\n * 换句话说：即使用户不使用 CompatibleMenu 和 RoutableMenu，他也必须自己安装dva。\n *\n * 为了避免上述情况，我们不在index.js export CompatibleMenu 和 RoutableMenu，\n * 而是在根目录下用两个文件分别export它们。\n * 如果用户想使用CompatibleMenu，他要这么做:\n * 1. yarn add dva 因为CompatibleMenu依赖dva\n * 2. `import CompatibleMenu from '@alicloud/console-components-console-menu/CompatibleMenu'`\n * RoutableMenu同理。\n * 注：为什么不直接让用户：\n * `import CompatibleMenu from '@alicloud/console-components-console-menu/es/CompatibleMenu'`\n * 因为我们不希望用户依赖于我们的内部目录结构`es`，未来我们可能把构建结果放在`esnext`。\n *\n * 如果用户不使用这两个特殊组件，那么他可以直接\n * `import ConsoleMenu from '@alicloud/console-components-console-menu'`，不用安装dva。\n */\n\nimport RoutableMenu from './es/RoutableMenu'\n\nexport default RoutableMenu\n","demoMeta.json":'{"entryPath":"src/demo/routable-menu.tsx"}'})}}]);
//# sourceMappingURL=33-8481df0cbc3270566ef1.js.map