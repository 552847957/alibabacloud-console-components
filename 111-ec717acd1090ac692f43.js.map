{"version":3,"sources":["webpack:///../packages/component/src/components/form/demo/demo13.js"],"names":["initState","values","email","username","errors","FormDemo","props","field","Field","onChange","name","value","console","log","getError","dispatch","type","componentWillReceiveProps","nextProps","this","setValues","formData","setErrors","setEmail","setName","setError","render","Item","required","format","help","requiredMessage","defaultValue","style","color","onClick","bind","reset","React","Component","ReduxFormDemo","connect","state","formReducer","store","createStore","combineReducers","action","Demo13","demoMeta","zhName","zhDesc","_demoSrcFiles","__demo_loader_placeholder__"],"mappings":"2+BAKA,IAAMA,EAAY,CAChBC,OAAQ,CAAEC,MAAO,GAAIC,SAAU,UAC/BC,OAAQ,I,IA0BJC,E,oBACJ,WAAYC,GAAQ,IAAD,SACjB,cAAMA,IAAN,MAEKC,MAAQ,IAAIC,Q,yHAAJ,IAAgB,CAC3BC,SAAU,SAACC,EAAMC,GAAW,IAAD,IACzBC,QAAQC,IAAI,WAAYH,EAAMC,EAAO,EAAKJ,MAAMO,SAASJ,IACzD,EAAKJ,MAAMS,SAAS,CAClBC,KAAM,cACNf,QAAM,OACHS,GAAOC,EADJ,KAIR,EAAKL,MAAMS,SAAS,CAClBC,KAAM,aACNZ,QAAM,OACHM,GAAO,EAAKH,MAAMO,SAASJ,GADxB,QAdK,E,kHAsBnBO,0BAAA,SAA0BC,GACxBC,KAAKZ,MAAMa,UAAUF,EAAUG,SAASpB,QACxCkB,KAAKZ,MAAMe,UAAUJ,EAAUG,SAASjB,S,EAG1CmB,SAAA,WACEJ,KAAKb,MAAMS,SAAS,CAClBC,KAAM,cACNf,OAAQ,CACNC,MAAO,mB,EAKbsB,QAAA,WACEL,KAAKb,MAAMS,SAAS,CAClBC,KAAM,cACNf,OAAQ,CACNE,SAAU,Y,EAKhBsB,SAAA,WACEN,KAAKb,MAAMS,SAAS,CAClBC,KAAM,aACNZ,OAAQ,CACNF,MAAO,gC,EAKboB,UAAA,WACEH,KAAKb,MAAMS,SAAS,CAClBC,KAAM,aACNZ,OAAQ,CACNF,MAAO,8BACPC,SAAU,kC,EAKhBuB,OAAA,WAAU,IAAD,OACP,OACE,kBAAC,OAAD,CAAMnB,MAAOY,KAAKZ,OAChB,kBAAC,OAAKoB,KAAN,CAAWC,UAAQ,EAACC,OAAO,SACzB,kBAAC,QAAD,CAAOnB,KAAK,WAEd,kBAAC,OAAKiB,KAAN,CAAWG,KAAK,GAAGF,UAAQ,EAACG,gBAAgB,YAC1C,kBAAC,QAAD,CACErB,KAAK,WACLsB,aAAcb,KAAKb,MAAMe,SAASpB,OAAOE,WAE3C,uBAAG8B,MAAO,CAAEC,MAAO,SAAWf,KAAKZ,MAAMO,SAAS,cAGpD,qCAAWK,KAAKb,MAAMJ,OAASiB,KAAKb,MAAMJ,MAAMS,OAChD,kBAAC,SAAD,CAAQwB,QAAShB,KAAKI,SAASa,KAAKjB,OAApC,YACA,kBAAC,SAAD,CAAQgB,QAAShB,KAAKK,QAAQY,KAAKjB,OAAnC,WACA,kBAAC,SAAD,CAAQgB,QAAShB,KAAKM,SAASW,KAAKjB,OAApC,YACA,kBAAC,SAAD,CAAQgB,QAAShB,KAAKG,UAAUc,KAAKjB,OAArC,aACA,kBAAC,SAAD,CAAQgB,QAAS,kBAAM,EAAK5B,MAAM8B,UAAlC,W,GApFeC,IAAMC,WA0FvBC,EAAgBC,aAAQ,SAAAC,GAC5B,MAAO,CACLrB,SAAUqB,EAAMC,eAFEF,CAInBpC,GAEGuC,EAAQC,YACZC,YAAgB,CACdH,YAzHJ,SAAqBD,EAAmBK,GACtC,YAD8C,IAA3BL,MAAQ1C,GACnB+C,EAAO/B,MACb,IAAK,cACH,OAAO,EAAP,GACK0B,EADL,CAEEzC,OAAO,EAAD,GACDyC,EAAMzC,OADL,GAED8C,EAAO9C,UAGhB,IAAK,aACH,OAAO,EAAP,GACKyC,EADL,CAEEtC,OAAO,EAAD,GACDsC,EAAMtC,OADL,GAED2C,EAAO3C,UAGhB,QACE,OAAOsC,OAkHEM,UARA,kBACb,kBAAC,IAAD,CAAUJ,MAAOA,GACf,6BACE,kBAACJ,EAAD,SAOC,IAAMS,EAAW,CACtBC,OAAO,SACPC,OAAO,wHAKMC,EAAgBC","file":"111-ec717acd1090ac692f43.js","sourcesContent":["import React from 'react'\nimport { Form, Input, Button, Field } from '@alicloud/console-components'\nimport { combineReducers, createStore } from 'redux'\nimport { Provider, connect } from 'react-redux'\n\nconst initState = {\n  values: { email: '', username: 'xiachi' },\n  errors: {},\n}\n\nfunction formReducer(state = initState, action) {\n  switch (action.type) {\n    case 'save_fields':\n      return {\n        ...state,\n        values: {\n          ...state.values,\n          ...action.values,\n        },\n      }\n    case 'set_errors':\n      return {\n        ...state,\n        errors: {\n          ...state.errors,\n          ...action.errors,\n        },\n      }\n    default:\n      return state\n  }\n}\n\nclass FormDemo extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.field = new Field(this, {\n      onChange: (name, value) => {\n        console.log('onChange', name, value, this.field.getError(name))\n        this.props.dispatch({\n          type: 'save_fields',\n          values: {\n            [name]: value,\n          },\n        })\n        this.props.dispatch({\n          type: 'set_errors',\n          errors: {\n            [name]: this.field.getError(name),\n          },\n        })\n      },\n    })\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.field.setValues(nextProps.formData.values)\n    this.field.setErrors(nextProps.formData.errors)\n  }\n\n  setEmail() {\n    this.props.dispatch({\n      type: 'save_fields',\n      values: {\n        email: 'qq@gmail.com',\n      },\n    })\n  }\n\n  setName() {\n    this.props.dispatch({\n      type: 'save_fields',\n      values: {\n        username: 'frank',\n      },\n    })\n  }\n\n  setError() {\n    this.props.dispatch({\n      type: 'set_errors',\n      errors: {\n        email: 'Error message from remote',\n      },\n    })\n  }\n\n  setErrors() {\n    this.props.dispatch({\n      type: 'set_errors',\n      errors: {\n        email: 'A-Error message from remote',\n        username: 'B-Error message from remote',\n      },\n    })\n  }\n\n  render() {\n    return (\n      <Form field={this.field}>\n        <Form.Item required format=\"email\">\n          <Input name=\"email\" />\n        </Form.Item>\n        <Form.Item help=\"\" required requiredMessage=\"required\">\n          <Input\n            name=\"username\"\n            defaultValue={this.props.formData.values.username}\n          />\n          <p style={{ color: 'blue' }}>{this.field.getError('username')}</p>\n        </Form.Item>\n\n        <p>email: {this.props.email && this.props.email.value}</p>\n        <Button onClick={this.setEmail.bind(this)}>setEmail</Button>\n        <Button onClick={this.setName.bind(this)}>setName</Button>\n        <Button onClick={this.setError.bind(this)}>setError</Button>\n        <Button onClick={this.setErrors.bind(this)}>setErrors</Button>\n        <Button onClick={() => this.field.reset()}>reset</Button>\n      </Form>\n    )\n  }\n}\n\nconst ReduxFormDemo = connect(state => {\n  return {\n    formData: state.formReducer,\n  }\n})(FormDemo)\n\nconst store = createStore(\n  combineReducers({\n    formReducer,\n  })\n)\n\nconst Demo13 = () => (\n  <Provider store={store}>\n    <div>\n      <ReduxFormDemo />\n    </div>\n  </Provider>\n)\n\nexport default Demo13\n\nexport const demoMeta = {\n  zhName: `手动设置错误`,\n  zhDesc: `在\\`redux\\`中结合 \\`componentWillReceiveProps\\` \\`setErrors\\` 使用, 配合 Field 使用更加方便\n\n\t如果需要自己控制错误位置，可以让\\`help=\"\"\\` 然后自己放置展示错误的地方`,\n}\n;\n  export const _demoSrcFiles = __demo_loader_placeholder__"],"sourceRoot":""}