{"version":3,"sources":["webpack:///../packages/rc-console-menu/es/RoutableMenu.js","webpack:///../packages/rc-console-menu/RoutableMenu.js","webpack:///../packages/rc-console-menu/stories/routable-menu.tsx"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","Context","React","createContext","getBestMatchPattern","pathname","pathPatterns","currentBest","Number","MAX_VALUE","match","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","path","value","matchPath","params","isExact","err","return","isValidDescriptor","descriptor","_typeof","isNil","compareDescriptor","prev","useBuiltInLocationMatcher","items","useMemo","getBestMatchItem","initialDescriptor","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","item","nextDescriptor","_item$activePathPatte","activePathPatterns","concat","_toConsumableArray","useRoutableMenu","options","mapLocationToActiveKey","onItemClick","location","activeKeyFromLocation","useMapLocationToActiveKey","matchResult","matchedActiveKey","_useClickMonitor","originalOnClick","_useState","useState","_useState2","_slicedToArray","lastClickedKey","setLastClickedKey","useCallback","useClickMonitor","_useClickMonitor2","wrappedOnClick","normalizeItems","map","to","href","_item$linkProps","linkProps","disabled","render","subItems","renderItem","createElement","Consumer","Error","Link","_extends","label","RoutableMenu","withRouter","_ref","activeKey","openKeys","staticContext","onOpen","defaultOpenKeys","restProps","_objectWithoutProperties","_useRoutableMenu","_useRoutableMenu2","normalizedItems","derivedActiveKey","routableOnItemClick","providerValue","_useState3","_useState4","statefulOpenKeys","setOpenKeys","actualActiveKey","actualOpenKeys","useLayoutEffect","newOpenKeys","parentItems","findParents","currentParents","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","Array","isArray","found","actualOnOpen","extra","openKeysProp","Provider","ConsoleMenu","regions","routeProps","thisItem","region","visible","_demoSrcFiles","Example","header","__demo_loader_placeholder__"],"mappings":"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","file":"26-8131efdb4479d653ce12.js","sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useMemo, useState, useCallback, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Link, matchPath } from 'dva/router';\nimport ConsoleMenu from './ConsoleMenu';\nimport { isNil } from './utils';\n\n/* eslint-disable @typescript-eslint/no-explicit-any, no-restricted-syntax */\nvar Context = React.createContext(null);\n\nvar normalizeItems = function normalizeItems() {\n  var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return items.map(function (item) {\n    var to = item.to,\n        href = item.href,\n        _item$linkProps = item.linkProps,\n        linkProps = _item$linkProps === void 0 ? {} : _item$linkProps,\n        disabled = item.disabled,\n        render = item.render,\n        subItems = item.items;\n\n    if (subItems) {\n      return _objectSpread({}, item, {\n        items: normalizeItems(subItems)\n      });\n    }\n\n    if (isNil(render) && !disabled) {\n      // create leaf item a default renderer\n      if (to) {\n        // this is a in-app link, render `<Link>`\n        return _objectSpread({}, item, {\n          render: function render(renderItem) {\n            return React.createElement(Context.Consumer, null, function (value) {\n              if (!value) throw new Error(\"item is not rendered under RoutableMenu\");\n              return React.createElement(Link, _extends({}, linkProps, {\n                to: typeof renderItem.to === 'function' ? renderItem.to(value, renderItem) : renderItem.to\n              }), renderItem.label);\n            });\n          }\n        });\n      }\n\n      if (href) {\n        // this is a web link, render `<a>`\n        return _objectSpread({}, item, {\n          render: function render(renderItem) {\n            return React.createElement(Context.Consumer, null, function (value) {\n              if (!value) throw new Error(\"item is not rendered under RoutableMenu\");\n              return React.createElement(\"a\", _extends({}, renderItem.linkProps, {\n                href: typeof renderItem.href === 'function' ? renderItem.href(value, renderItem) : renderItem.href\n              }), renderItem.label);\n            });\n          }\n        });\n      }\n    }\n\n    return item;\n  });\n};\n\nvar getBestMatchPattern = function getBestMatchPattern(pathname, pathPatterns) {\n  var currentBest = {\n    length: Number.MAX_VALUE,\n    match: null\n  };\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = pathPatterns[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var path = _step.value;\n      var match = matchPath(pathname, path); // Check if the path matches the location.pathname.\n\n      if (match) {\n        // The identifier that described the complexity of path matching.\n        // The shorter the length, the less the matching overhead,\n        // and the most similar between pathname and pattern.\n        var length = 0; // To mutate path's length by couting params.\n        // Every matched param will increase a bit of length.\n        // @woota provided the idea and original algorithm in previous version.\n        //\n        // e.g.:\n        // If the location.pathname is `/foo/bar/baz`:\n        // - To match `/foo/bar/baz`, the length is `0`\n        // - To match `/foo/bar/:id`, the length is `1`\n        // - To match `/foo/:name/:id`, the length is `2`\n        //\n\n        if (match.params) {\n          length += Object.keys(match.params).length;\n        } // Add a large number if the path NOT matches the location.pathname exactly.\n\n\n        if (!match.isExact) {\n          // Assuming params' count less than 1000\n          length += 1000;\n        } // Compare the length to previous length and pick up the shorter one.\n\n\n        if (length < currentBest.length) {\n          currentBest = {\n            length: length,\n            match: match\n          };\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  if (currentBest.match && currentBest.length < Number.MAX_VALUE) return currentBest;\n  return null;\n};\n\nvar isValidDescriptor = function isValidDescriptor(descriptor) {\n  return _typeof(descriptor) === 'object' && !isNil(descriptor) && !isNil(descriptor.key) && !isNil(descriptor.length) && !isNil(descriptor.match) && _typeof(descriptor.match) === 'object';\n};\n\nvar compareDescriptor = function compareDescriptor(prev, next) {\n  if (!isValidDescriptor(next)) {\n    return prev;\n  } // Returns newer descriptor if older descriptor is invalid,\n  // or it has a shorter length.\n\n\n  if (!isValidDescriptor(prev) || next.length < prev.length) {\n    return next;\n  }\n\n  return prev;\n};\n\nvar getBestMatchItem = function getBestMatchItem(items, pathname) {\n  var initialDescriptor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    key: 'dummy',\n    match: null,\n    length: Number.MAX_VALUE\n  };\n  var descriptor = initialDescriptor;\n  if (isNil(items)) return null;\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = items[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var item = _step2.value;\n      var nextDescriptor = void 0;\n\n      if (item.items) {\n        nextDescriptor = getBestMatchItem(item.items, pathname, descriptor);\n      } else {\n        var key = item.key,\n            _item$activePathPatte = item.activePathPatterns,\n            activePathPatterns = _item$activePathPatte === void 0 ? [] : _item$activePathPatte;\n        nextDescriptor = _objectSpread({\n          key: key,\n          length: Number.MAX_VALUE,\n          match: null\n        }, getBestMatchPattern(pathname, [key].concat(_toConsumableArray(activePathPatterns))));\n      }\n\n      descriptor = compareDescriptor(descriptor, nextDescriptor); // return descriptor with length === 0 immediately\n\n      if (descriptor && descriptor.length <= 0) {\n        return descriptor;\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  if (descriptor.length < Number.MAX_VALUE && !isNil(descriptor.match)) return descriptor;\n  return null;\n};\n\nvar useBuiltInLocationMatcher = function useBuiltInLocationMatcher(pathname, items) {\n  return useMemo(function () {\n    return getBestMatchItem(items, pathname);\n  }, [pathname, items]);\n};\n\nvar useMapLocationToActiveKey = function useMapLocationToActiveKey(location, mapLocationToActiveKey) {\n  return useMemo(function () {\n    if (typeof mapLocationToActiveKey === 'function') {\n      return mapLocationToActiveKey(location);\n    }\n  }, [mapLocationToActiveKey, location]);\n};\n\nvar useClickMonitor = function useClickMonitor(originalOnClick) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      lastClickedKey = _useState2[0],\n      setLastClickedKey = _useState2[1];\n\n  var wrappedOnClick = useCallback(function () {\n    if (typeof originalOnClick === 'function') {\n      originalOnClick.apply(void 0, arguments);\n    }\n\n    setLastClickedKey(arguments.length <= 0 ? undefined : arguments[0]);\n  }, [originalOnClick]);\n  return [lastClickedKey, wrappedOnClick];\n};\n/**\n * 根据location，计算出应该active哪个item，有3种计算方式依次尝试：\n * 1. 用户提供了mapLocationToActiveKey，则直接mapLocationToActiveKey(location)\n * 2. 将pathname与item的key匹配，得到最接近的item\n * 3. 如果上述方法都不行，则直接使用用户最近点击的item\n */\n\n\nvar useRoutableMenu = function useRoutableMenu(options) {\n  var items = options.items,\n      mapLocationToActiveKey = options.mapLocationToActiveKey,\n      onItemClick = options.onItemClick,\n      location = options.location;\n  var pathname = location.pathname; // 1. 用户提供了mapLocationToActiveKey，则直接mapLocationToActiveKey(location)\n\n  var activeKeyFromLocation = useMapLocationToActiveKey(location, mapLocationToActiveKey); // 2. 将pathname与item的key匹配，得到最接近的item\n\n  var matchResult = useBuiltInLocationMatcher(pathname, items) || {\n    key: null,\n    match: null\n  };\n  var matchedActiveKey = matchResult.key,\n      match = matchResult.match; // 3. 如果上述方法都不行，则直接使用用户最近点击的item\n\n  var _useClickMonitor = useClickMonitor(onItemClick),\n      _useClickMonitor2 = _slicedToArray(_useClickMonitor, 2),\n      lastClickedKey = _useClickMonitor2[0],\n      wrappedOnClick = _useClickMonitor2[1];\n\n  var normalizedItems = useMemo(function () {\n    return normalizeItems(items);\n  }, [items]); // 以上三个结果，取出优先级最高的有效值\n\n  var activeKey = [activeKeyFromLocation, matchedActiveKey, lastClickedKey].filter(function (value) {\n    return !isNil(value);\n  })[0];\n  return [normalizedItems, activeKey, wrappedOnClick, {\n    match: match,\n    location: location\n  }];\n}; // 从一个树中，找出某个节点的所有父节点\n\n\nfunction findParents(activeKey, items, currentParents) {\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = items[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var item = _step3.value;\n\n      if (item.key === activeKey) {\n        return [].concat(_toConsumableArray(currentParents), [item]);\n      }\n\n      if (Array.isArray(item.items)) {\n        var found = findParents(activeKey, item.items, [].concat(_toConsumableArray(currentParents), [item]));\n        if (found) return found;\n      }\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return null;\n}\n\nvar RoutableMenu = function RoutableMenu(_ref) {\n  var location = _ref.location,\n      mapLocationToActiveKey = _ref.mapLocationToActiveKey,\n      items = _ref.items,\n      onItemClick = _ref.onItemClick,\n      activeKey = _ref.activeKey,\n      staticContext = _ref.staticContext,\n      openKeys = _ref.openKeys,\n      onOpen = _ref.onOpen,\n      defaultOpenKeys = _ref.defaultOpenKeys,\n      restProps = _objectWithoutProperties(_ref, [\"location\", \"mapLocationToActiveKey\", \"items\", \"onItemClick\", \"activeKey\", \"staticContext\", \"openKeys\", \"onOpen\", \"defaultOpenKeys\"]);\n\n  var _useRoutableMenu = useRoutableMenu({\n    items: items,\n    onItemClick: onItemClick,\n    location: location,\n    mapLocationToActiveKey: mapLocationToActiveKey\n  }),\n      _useRoutableMenu2 = _slicedToArray(_useRoutableMenu, 4),\n      normalizedItems = _useRoutableMenu2[0],\n      derivedActiveKey = _useRoutableMenu2[1],\n      routableOnItemClick = _useRoutableMenu2[2],\n      providerValue = _useRoutableMenu2[3]; // 目的：计算出actualActiveKey以后，需要激活对应节点，同时要把其所有父节点展开\n\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      statefulOpenKeys = _useState4[0],\n      setOpenKeys = _useState4[1]; // 当用户传入activeKey时，为受控模式，不使用自己计算的derivedActiveKey\n\n\n  var actualActiveKey = activeKey || derivedActiveKey;\n\n  var actualOpenKeys = function () {\n    if (defaultOpenKeys || openKeys) return openKeys; // 仅当用户没有传入defaultOpenKeys、openKeys时，使用智能计算出的statefulOpenKeys\n\n    return statefulOpenKeys;\n  }();\n\n  useLayoutEffect(function () {\n    var newOpenKeys = function () {\n      if (actualActiveKey) {\n        // 找出激活节点的所有父节点\n        var parentItems = findParents(actualActiveKey, normalizedItems, []);\n\n        if (Array.isArray(parentItems)) {\n          return parentItems.map(function (i) {\n            return i.key;\n          });\n        }\n      }\n\n      return undefined;\n    }();\n\n    setOpenKeys(newOpenKeys);\n  }, [actualActiveKey, normalizedItems]);\n  var actualOnOpen = useCallback(function (key, extra) {\n    if (typeof onOpen === 'function') {\n      onOpen(key, extra);\n    }\n\n    setOpenKeys(key);\n  }, [onOpen]); // openKeys传入undefined也会被认为是受控模式，因此如果想非受控，不能传入这个prop\n\n  var openKeysProp = actualOpenKeys ? {\n    openKeys: actualOpenKeys\n  } : undefined;\n  return React.createElement(Context.Provider, {\n    value: providerValue\n  }, React.createElement(ConsoleMenu, _extends({}, restProps, {\n    items: normalizedItems,\n    activeKey: actualActiveKey\n  }, openKeysProp, {\n    defaultOpenKeys: defaultOpenKeys,\n    onOpen: actualOnOpen,\n    onItemClick: routableOnItemClick\n  })));\n};\n\nRoutableMenu.propTypes = _objectSpread({}, ConsoleMenu.propTypes, {\n  location: PropTypes.objectOf(PropTypes.any),\n  mapLocationToActiveKey: PropTypes.func\n});\nexport default withRouter(RoutableMenu);","/**\n * 我们没有从index.js export CompatibleMenu 和 RoutableMenu。\n * 因为这两个组件依赖于peerDependency: dva。\n * 如果我们在index.js中引入这两个组件，那么**即使用户没有import这两个组件**，\n * webpack在构建依赖树的时候也必须解析到用户安装的dva及其递归依赖，\n * 否则会报错。\n * 换句话说：即使用户不使用 CompatibleMenu 和 RoutableMenu，他也必须自己安装dva。\n *\n * 为了避免上述情况，我们不在index.js export CompatibleMenu 和 RoutableMenu，\n * 而是在根目录下用两个文件分别export它们。\n * 如果用户想使用CompatibleMenu，他要这么做:\n * 1. yarn add dva 因为CompatibleMenu依赖dva\n * 2. `import CompatibleMenu from '@alicloud/console-components-console-menu/CompatibleMenu'`\n * RoutableMenu同理。\n * 注：为什么不直接让用户：\n * `import CompatibleMenu from '@alicloud/console-components-console-menu/es/CompatibleMenu'`\n * 因为我们不希望用户依赖于我们的内部目录结构`es`，未来我们可能把构建结果放在`esnext`。\n *\n * 如果用户不使用这两个特殊组件，那么他可以直接\n * `import ConsoleMenu from '@alicloud/console-components-console-menu'`，不用安装dva。\n */\n\nimport RoutableMenu from './es/RoutableMenu'\n\nexport default RoutableMenu\n","import React from 'react'\nimport { Route } from 'dva/router'\nimport { Input } from '@alicloud/console-components'\nimport RoutableMenu from '@alicloud/console-components-console-menu/RoutableMenu'\nimport { IRoutableItemDescriptor } from '@alicloud/console-components-console-menu'\nimport { FakeBrowserWithWrapper as FakeBrowser } from '@alicloud/console-components-fake-browser'\n\nconst regions = ['cn-beijing', 'cn-shanghai', 'cn-hangzhou']\n\nconst items: IRoutableItemDescriptor[] = [\n  { key: '/home', to: '/', label: '首页' },\n  { key: '/instance', to: '/instance', label: '实例概览' },\n  {\n    key: '/instance/:region',\n    // 可以使用函数来返回动态的 pathname 或 location\n    to: () => `/instance/${regions[0]}`,\n    activePathPatterns: ['/instance/:region', '/instance-list/:region'],\n    label: '实例列表',\n  },\n\n  // Defination as a sub menu\n  {\n    key: '/logs',\n    label: '日志',\n    items: [\n      {\n        key: '/daily/:region?',\n        // to 也可以声明为一个函数表达式\n        // 第一个参数是当前的 route props ，第二个参数是当前的 item 的结构化信息\n        // 你可以利用这些信息来动态地返回需要进行跳转的 pathname 或 location\n        to: (routeProps, thisItem) => {\n          // 下面的这个例子使用了当前路由的匹配信息（注意：并不是对于该 item 的匹配）\n          // 来进行相应的跳转。如果当前的路由中包含 param: region ，（譬如\n          // `/instance/:region` ，那么点击该 item 将会跳转到 `/daily/:region`\n          const match = routeProps.match || {}\n          const { params: { region = '' } = {} } = match\n          return region ? `/daily/${region}` : '/daily'\n        },\n        label: '日常环境',\n      },\n      { key: '/pre', to: '/pre', visible: false, label: '预发环境' },\n      { key: '/prod', to: '/prod', label: '生产环境' },\n    ],\n  },\n\n  // Another sub menu\n  {\n    key: '/others',\n    label: '其他',\n    items: [\n      {\n        key: '/help',\n        label: '帮助',\n        render: ({ key, label }) => (\n          <a href=\"https://www.aliyun.com\" target=\"_blank\">\n            {label}\n          </a>\n        ),\n      },\n      {\n        key: '/docs',\n        to: '/docs',\n        label: '文档',\n        disabled: true,\n      },\n    ],\n  },\n]\n\nconst Example = () => {\n  return (\n    <FakeBrowser>\n      <div>\n        <RoutableMenu header=\"阿里云控制台\" items={items} />\n        <p>\n          Tips: 在地址栏输入<code>/daily/cn-beijing</code>，父节点会自动展开\n        </p>\n      </div>\n    </FakeBrowser>\n  )\n}\n\nexport default Example\n;\n  export const _demoSrcFiles = __demo_loader_placeholder__"],"sourceRoot":""}